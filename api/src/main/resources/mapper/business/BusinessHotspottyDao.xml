<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="io.renren.modules.business.dao.BusinessHotspottyDao">

    <sql id="Base_Column_List">
        hotspotty_id,
        `name`,
        private_ip,
        public_ip,
        brand,
        room,
        `online`,
        country,
        city,
        street,
        Hex,
        total24h,
        total1d,
        total30d,
        `owner`,
        address,
        remarks,
        group_id,
        create_user_id,
        create_time,
        update_time,
        `status`
    </sql>
    <sql id="join_Column_List">
        bh.hotspotty_id,
        bh.`name`,
        bh.private_ip,
        bh.public_ip,
        bh.brand,
        bh.room,
        bh.`online`,
        bh.country,
        bh.city,
        bh.street,
        bh.Hex,
        bh.total24h,
        bh.total1d,
        bh.total30d,
        bh.`owner`,
        bh.address,
        bh.remarks,
        bh.group_id,
        bh.create_user_id,
        bh.create_time,
        bh.update_time,
        bh.`status`,
        bg.group_name
    </sql>
    <resultMap type="io.renren.modules.business.entity.BusinessHotspottyEntity" id="businessHotspottyMap">
        <result property="hotspottyId" column="hotspotty_id"/>
        <result property="name" column="name"/>
        <result property="privateIp" column="private_ip"/>
        <result property="publicIp" column="public_ip"/>
        <result property="brand" column="brand"/>
        <result property="room" column="room"/>
        <result property="online" column="online"/>
        <result property="country" column="country"/>
        <result property="city" column="city"/>
        <result property="street" column="street"/>
        <result property="hex" column="Hex"/>
        <result property="total24h" column="total24h"/>
        <result property="total1d" column="total1d"/>
        <result property="total30d" column="total30d"/>
        <result property="owner" column="owner"/>
        <result property="address" column="address"/>
        <result property="remarks" column="remarks"/>
        <result property="groupId" column="group_id"/>
        <result property="createUserId" column="create_user_id"/>
        <result property="createTime" column="create_time"/>
        <result property="updateTime" column="update_time"/>
        <result property="status" column="status"/>
    </resultMap>
    <resultMap type="io.renren.modules.business.entity.HotspottyEntity" id="hotspottyMap">
        <result property="hotspottyId" column="hotspotty_id"/>
        <result property="name" column="name"/>
        <result property="privateIp" column="private_ip"/>
        <result property="publicIp" column="public_ip"/>
        <result property="brand" column="brand"/>
        <result property="room" column="room"/>
        <result property="online" column="online"/>
        <result property="country" column="country"/>
        <result property="city" column="city"/>
        <result property="street" column="street"/>
        <result property="hex" column="Hex"/>
        <result property="total24h" column="total24h"/>
        <result property="total1d" column="total1d"/>
        <result property="total30d" column="total30d"/>
        <result property="owner" column="owner"/>
        <result property="address" column="address"/>
        <result property="remarks" column="remarks"/>
        <result property="groupId" column="group_id"/>
        <result property="createUserId" column="create_user_id"/>
        <result property="createTime" column="create_time"/>
        <result property="updateTime" column="update_time"/>
        <result property="status" column="status"/>
        <result property="groupName" column="group_name"/>
    </resultMap>
<!--auto generated by MybatisCodeHelper on 2022-03-08-->

<!--auto generated by MybatisCodeHelper on 2022-03-08-->
    <select id="findHotspottyIdByAddress" resultType="java.lang.Long">
        select hotspotty_id
        from business_hotspotty
        where address=#{address}
    </select>

<!--auto generated by MybatisCodeHelper on 2022-03-08-->
    <insert id="insertSelective">
        INSERT INTO business_hotspotty
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="hotspottyId != null">
                hotspotty_id,
            </if>
            <if test="name != null">
                name,
            </if>
            <if test="privateIp != null">
                private_ip,
            </if>
            <if test="publicIp != null">
                public_ip,
            </if>
            <if test="brand != null">
                brand,
            </if>
            <if test="room != null">
                room,
            </if>
            <if test="online != null">
                online,
            </if>
            <if test="country != null">
                country,
            </if>
            <if test="city != null">
                city,
            </if>
            <if test="street != null">
                street,
            </if>
            <if test="hex != null">
                Hex,
            </if>
            <if test="total24h != null">
                total24h,
            </if>
            <if test="total1d != null">
                total1d,
            </if>
            <if test="total30d != null">
                total30d,
            </if>
            <if test="owner != null">
                owner,
            </if>
            <if test="address != null">
                address,
            </if>
            <if test="remarks != null">
                remarks,
            </if>
            <if test="groupId != null">
                group_id,
            </if>
            <if test="createUserId != null">
                create_user_id,
            </if>
            <if test="createTime != null">
                create_time,
            </if>
            <if test="updateTime != null">
                update_time,
            </if>
            <if test="status != null">
                status
            </if>
        </trim>
        VALUES
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="hotspottyId != null">
                #{hotspottyId},
            </if>
            <if test="name != null">
                #{name},
            </if>
            <if test="privateIp != null">
                #{privateIp},
            </if>
            <if test="publicIp != null">
                #{publicIp},
            </if>
            <if test="brand != null">
                #{brand},
            </if>
            <if test="room != null">
                #{room},
            </if>
            <if test="online != null">
                #{online},
            </if>
            <if test="country != null">
                #{country},
            </if>
            <if test="city != null">
                #{city},
            </if>
            <if test="street != null">
                #{street},
            </if>
            <if test="hex != null">
                #{hex},
            </if>
            <if test="total24h != null">
                #{total24h},
            </if>
            <if test="total1d != null">
                #{total1d},
            </if>
            <if test="total30d != null">
                #{total30d},
            </if>
            <if test="owner != null">
                #{owner},
            </if>
            <if test="address != null">
                #{address},
            </if>
            <if test="remarks != null">
                #{remarks},
            </if>
            <if test="groupId != null">
                #{groupId},
            </if>
            <if test="createUserId != null">
                #{createUserId},
            </if>
            <if test="createTime != null">
                #{createTime},
            </if>
            <if test="updateTime != null">
                #{updateTime},
            </if>
            <if test="status != null">
                #{status}
            </if>
        </trim>
    </insert>

<!--auto generated by MybatisCodeHelper on 2022-03-09-->
    <select id="findAllByOwnerAndCreateUserId" resultMap="hotspottyMap">
        select
        <include refid="join_Column_List">
        </include>
        from business_hotspotty bh
        LEFT JOIN business_group bg ON bg.group_id = bh.group_id
        <where>
            <if test="owner != null">
                and bh.`owner`=#{owner}
            </if>
            <if test="createUserId != null">
                and bh.create_user_id=#{createUserId}
            </if>
            <if test="key != null">
                and bg.group_name like concat('%', #{key},'%')
            </if>
            <if test="online != null">
                and bh.online = #{online}
            </if>
            and bh.status = 1
        </where>

        limit #{pageConvertLine} , #{limit}
    </select>

    <select id="findAllByOwnerAndCreateUserIdCount" resultType="java.lang.Integer">
        select
        count(*)
        from business_hotspotty bh
        LEFT JOIN business_group bg ON bg.group_id = bh.group_id
        <where>
            <if test="owner != null">
                and bh.`owner`=#{owner}
            </if>
            <if test="createUserId != null">
                and bh.create_user_id=#{createUserId}
            </if>
            <if test="key != null">
                and bg.group_name like concat('%', #{key},'%')
            </if>
            <if test="online != null">
                and bh.online = #{online}
            </if>
            and bh.status = 1
        </where>
    </select>

<!--auto generated by MybatisCodeHelper on 2022-03-09-->
    <select id="findAll" resultMap="businessHotspottyMap">
        select
        <include refid="Base_Column_List"/>
        from business_hotspotty
    </select>

    <select id="findOnlines" resultType="io.renren.modules.business.dao.Select">
        SELECT
                concat(online,' 【', count(*), '】') as 'label', `online` as 'value'
        FROM
                business_hotspotty
        GROUP BY
                `online`
    </select>
</mapper>
